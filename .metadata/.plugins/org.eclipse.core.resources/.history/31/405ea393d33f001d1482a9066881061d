package main.java.controller;

import main.java.dao.UserInfoDao;
import main.java.test.UserInfo;

import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpSession;


public class UserInfoListController implements Controller {

	private UserInfoDao userinfoDao;
	@Override
	public Object[] getDataBinders() {
		// TODO Auto-generated method stub
		return new Object[] {
				"userinfo", UserInfo.class
		};
	}
	public UserInfoListController setUserInfoDao(UserInfoDao userinfoDao) {
		this.userinfoDao = userinfoDao;
		return this;
	}
	@Override
	public String execute(Map<String, Object> model) throws Exception {

		List<UserInfo> userInfo = userinfoDao.selectList();
		if(userInfo != null) {
			HttpSession session = (HttpSession) model.get("session");
			session.setAttribute("userInfo", userInfo);
			return "redirect:../UserInfoList.jsp";
		}else {
			return "/Error.jsp";
		}
//		if(userInfo != null) {
//			UserInfoDao userinfodao = (UserInfoDao)model.get("userinfodao");
//			model.put("userInfo", userinfodao.selectList());
//			return "redirect:../UserInfoList.jsp";
//		}else {
//			return "error.jsp";
//		}
		
	}
}
